{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["\r\n\r\n\r\n\r\nclass Observer{\r\n    constructor(data) {\r\n        this.walk(data);\r\n    }\r\n\r\n    walk(data){\r\n        Object.keys(data).forEach(key => defineReactive(data,key,data[key]))\r\n    }\r\n}\r\n\r\nfunction defineReactive(data,key,value) {\r\n\r\n    observe(value);  // 递归保证嵌套层级比较深的话  保证里面的属性能有响应式\r\n\r\n    Object.defineProperty(data,key, {\r\n        get(){\r\n            return value;\r\n        },\r\n        set(newValue) {\r\n            if(value == newValue) return;\r\n            value = newValue;\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe(data) {\r\n\r\n    if(typeof data !== 'object' || data == null) {\r\n        return;\r\n    }\r\n\r\n    return new Observer(data)\r\n\r\n}","import { observe } from \"./observe\";\r\n\r\nexport function initState(vm) {\r\n    const opts = vm.$options;\r\n    if(opts.data) {\r\n        initData(vm);\r\n    }\r\n}\r\n\r\nfunction proxy(vm, target, key) {\r\n   Object.defineProperty(vm, key, {\r\n       get() {\r\n        return vm[target][key]\r\n       },\r\n       set(newValue) {\r\n        vm[target][key] = newValue;\r\n       }\r\n   })\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data;\r\n    data = typeof data === 'function' ? data.call(vm) : data;\r\n\r\n    vm._data = data; \r\n\r\n    observe(data);\r\n\r\n    for(let key in data) {\r\n        proxy(vm,'_data',key)\r\n    }\r\n}","import { initState } from \"./state\";\r\n\r\n\r\nexport function initMixin(Vue) {\r\n    \r\n    Vue.prototype._init = function(options) {\r\n        const vm = this;\r\n        vm.$options = options;\r\n\r\n        initState(vm);\r\n\r\n    }\r\n\r\n}","import {initMixin} from './init'\r\n\r\nfunction Vue(options) {\r\n    this._init(options)\r\n}\r\n\r\ninitMixin(Vue)\r\n\r\n\r\nexport default Vue;"],"names":["Observer","data","walk","Object","keys","forEach","key","defineReactive","value","observe","defineProperty","get","set","newValue","initState","vm","opts","$options","initData","proxy","target","call","_data","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAIMA;EACF,oBAAYC,IAAZ,EAAkB;EAAA;;EACd,SAAKC,IAAL,CAAUD,IAAV;EACH;;;;aAED,cAAKA,IAAL,EAAU;EACNE,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAAAC,GAAG;EAAA,eAAIC,cAAc,CAACN,IAAD,EAAMK,GAAN,EAAUL,IAAI,CAACK,GAAD,CAAd,CAAlB;EAAA,OAA7B;EACH;;;;;;EAGL,SAASC,cAAT,CAAwBN,IAAxB,EAA6BK,GAA7B,EAAiCE,KAAjC,EAAwC;EAEpCC,EAAAA,OAAO,CAACD,KAAD,CAAP,CAFoC;;EAIpCL,EAAAA,MAAM,CAACO,cAAP,CAAsBT,IAAtB,EAA2BK,GAA3B,EAAgC;EAC5BK,IAAAA,GAD4B,iBACvB;EACD,aAAOH,KAAP;EACH,KAH2B;EAI5BI,IAAAA,GAJ4B,eAIxBC,QAJwB,EAId;EACV,UAAGL,KAAK,IAAIK,QAAZ,EAAsB;EACtBL,MAAAA,KAAK,GAAGK,QAAR;EACH;EAP2B,GAAhC;EASH;;EAEM,SAASJ,OAAT,CAAiBR,IAAjB,EAAuB;EAE1B,MAAG,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,IAAI,IAAvC,EAA6C;EACzC;EACH;;EAED,SAAO,IAAID,QAAJ,CAAaC,IAAb,CAAP;EAEH;;ECnCM,SAASa,SAAT,CAAmBC,EAAnB,EAAuB;EAC1B,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;EACA,MAAGD,IAAI,CAACf,IAAR,EAAc;EACViB,IAAAA,QAAQ,CAACH,EAAD,CAAR;EACH;EACJ;;EAED,SAASI,KAAT,CAAeJ,EAAf,EAAmBK,MAAnB,EAA2Bd,GAA3B,EAAgC;EAC7BH,EAAAA,MAAM,CAACO,cAAP,CAAsBK,EAAtB,EAA0BT,GAA1B,EAA+B;EAC3BK,IAAAA,GAD2B,iBACrB;EACL,aAAOI,EAAE,CAACK,MAAD,CAAF,CAAWd,GAAX,CAAP;EACA,KAH0B;EAI3BM,IAAAA,GAJ2B,eAIvBC,QAJuB,EAIb;EACbE,MAAAA,EAAE,CAACK,MAAD,CAAF,CAAWd,GAAX,IAAkBO,QAAlB;EACA;EAN0B,GAA/B;EAQF;;EAED,SAASK,QAAT,CAAkBH,EAAlB,EAAsB;EAClB,MAAId,IAAI,GAAGc,EAAE,CAACE,QAAH,CAAYhB,IAAvB;EACAA,EAAAA,IAAI,GAAG,OAAOA,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACoB,IAAL,CAAUN,EAAV,CAA7B,GAA6Cd,IAApD;EAEAc,EAAAA,EAAE,CAACO,KAAH,GAAWrB,IAAX;EAEAQ,EAAAA,OAAO,CAACR,IAAD,CAAP;;EAEA,OAAI,IAAIK,GAAR,IAAeL,IAAf,EAAqB;EACjBkB,IAAAA,KAAK,CAACJ,EAAD,EAAI,OAAJ,EAAYT,GAAZ,CAAL;EACH;EACJ;;EC5BM,SAASiB,SAAT,CAAmBC,GAAnB,EAAwB;EAE3BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAASC,OAAT,EAAkB;EACpC,QAAMZ,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcU,OAAd;EAEAb,IAAAA,SAAS,CAACC,EAAD,CAAT;EAEH,GAND;EAQH;;ECXD,SAASS,GAAT,CAAaG,OAAb,EAAsB;EAClB,OAAKD,KAAL,CAAWC,OAAX;EACH;;EAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}